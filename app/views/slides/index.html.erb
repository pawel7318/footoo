<%= javascript_tag do -%>
$(document).ready(function(){
    clone_checkboxes_values('slide_select_form', 'slide_select', 'slide_move');
    clone_checkboxes_values('slide_select_form', 'slide_select', 'slide_delete');
    $('#move_selected_button').click(function() {show_dialog_move_slides_to_album()});
});
<% end -%>

<%- model_class = Slide -%>
<div class="page-header">
  <h1><%= @album.name %> <%=t '.title', :default => model_class.model_name.human.pluralize.titleize.downcase %></h1>
</div>

<div id="dialog-move-slides-to-album" title="Move selected slides to:" class="hide">
  <%= form_for :multi_slides_move, method: :patch, html: { id: 'form_move' }, remote: true do |f| %>
    <% @slides.each do |slide| %>
      <%= check_box_tag "ids[]", slide.id, false, class: "multi-select, hide", id: "slide_move_#{slide.id}" %>
    <% end %>
    <%= select_tag "new_album_id", options_for_select(@other_albums.collect{ |album| [album.name, album.id]}) %>
  <% end %>
</div>

<%= button_tag "Move selected", { :type => 'button', :id => 'move_selected_button', :class => 'btn' } %>

<%= form_for :multi_slides_delete, method: :delete, html: { id: 'form_delete' }, remote: true do |f| %>
  <%= f.submit "Delete selected", :class => 'btn btn-danger' %>
    <% @slides.each do |slide| %>
      <%= check_box_tag "ids[]", slide.id, false, class: "multi-select, hide", id: "slide_delete_#{slide.id}" %>
    <% end %>
<% end %>

<%= form_tag_html :id=> 'slide_select_form' %>


<table class="table table-striped">
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:thumbnail) %></th>
      <th><%= model_class.human_attribute_name(:description) %></th>
      <th><%= model_class.human_attribute_name(:photo_file_name) %></th>
      <th><%= model_class.human_attribute_name(:photo_content_type) %></th>
      <th><%= model_class.human_attribute_name(:photo_file_size) %></th>
      <th><%= model_class.human_attribute_name(:photo_updated_at) %></th>
      <th><%= model_class.human_attribute_name(:photo_fingerprint) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @slides.each do |slide| %>
    <tr id="slide_<%= slide.id %>">
      <td><%= check_box_tag "ids[]", slide.id, false, class: "multi-select", id: "slide_select_#{slide.id}" %></td>
      <td><%= link_to slide.id, slide_path(slide.id) %></td>
      <td><%= image_tag slide.photo.url(:thumb) %></td>
      <td><%= slide.description %></td>
      <td><%= slide.photo_file_name %></td>
      <td><%= slide.photo_content_type %></td>
      <td><%= slide.photo_file_size %></td>
      <td><%= slide.photo_updated_at %></td>
      <td><%= slide.photo_fingerprint %></td>
      <td><%=l slide.created_at %></td>
      <td>
        <%= link_to t('.edit', :default => t("helpers.links.edit")),
        edit_slide_path(slide), :class => 'btn btn-mini' %>
        <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
        multi_slides_delete_path(slide.album.id, slide.id),
        :method => :delete,
        :class => 'btn btn-mini btn-danger',
        :remote => true %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
</form>

<%= render :partial => 'albums/show_buttons' %>

